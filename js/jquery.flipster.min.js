!function(t,e,n){"use strict";function i(t,e){var n=null;return function(){var i=this,r=arguments;null===n&&(n=setTimeout(function(){t.apply(i,r),n=null},e))}}var r=function(){var t={};return function(e){if(t[e]!==n)return t[e];var i=document.createElement("div").style,r=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+["webkit","moz","ms","o"].join(r+" ")+r).split(" ");for(var o in a)if(a[o]in i)return t[e]=a[o];return t[e]=!1}}(),a="http://www.w3.org/2000/svg",o=function(){var t;return function(){if(t!==n)return t;var e=document.createElement("div");return e.innerHTML="<svg/>",t=e.firstChild&&e.firstChild.namespaceURI===a}}(),s=t(e),l=r("transform"),c={itemContainer:"ul",itemSelector:"li",start:"center",fadeIn:400,loop:!1,autoplay:!1,pauseOnHover:!0,style:"coverflow",spacing:-.6,click:!0,keyboard:!0,scrollwheel:!0,touch:!0,nav:!1,buttons:!1,buttonPrev:"Previous",buttonNext:"Next",onItemSwitch:!1,centerImageClickUrl:!1},u={main:"flipster",active:"flipster--active",container:"flipster__container",nav:"flipster__nav",navChild:"flipster__nav__child",navItem:"flipster__nav__item",navLink:"flipster__nav__link",navCurrent:"flipster__nav__item--current",navCategory:"flipster__nav__item--category",navCategoryLink:"flipster__nav__link--category",button:"flipster__button",buttonPrev:"flipster__button--prev",buttonNext:"flipster__button--next",item:"flipster__item",itemCurrent:"flipster__item--current",itemPast:"flipster__item--past",itemFuture:"flipster__item--future",itemContent:"flipster__item__content"},f=new RegExp("\\b("+u.itemCurrent+"|"+u.itemPast+"|"+u.itemFuture+")(.*?)(\\s|$)","g"),p=new RegExp("\\s\\s+","g");t.fn.flipster=function(r){if("string"==typeof r){var v=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=t(this).data("methods");return e[r]?e[r].apply(this,v):this})}var h=t.extend({},c,r);return this.each(function(){function r(t){var e="next"===t?h.buttonNext:h.buttonPrev;return"custom"!==h.buttons&&o?'<svg viewBox="0 0 13 20" xmlns="'+a+'" aria-labelledby="title"><title>'+e+'</title><polyline points="10,3 3,10 10,17"'+("next"===t?' transform="rotate(180 6.5,10)"':"")+"/></svg>":e}function c(e){return e=e||"next",t('<button class="'+u.button+" "+("next"===e?u.buttonNext:u.buttonPrev)+'" role="button" />').html(r(e)).on("click",function(t){b(e),t.preventDefault()})}function v(){h.buttons&&S.length>1&&(H.find("."+u.button).remove(),H.append(c("prev"),c("next")))}function d(){var e={};!h.nav||S.length<=1||(Y&&Y.remove(),Y=t('<ul class="'+u.nav+'" role="navigation" />'),z=t(""),S.each(function(n){var i=t(this),r=i.data("flip-category"),a=i.data("flip-title")||i.attr("title")||n,o=t('<a href="#" class="'+u.navLink+'">'+a+"</a>").data("index",n);if(z=z.add(o),r){if(!e[r]){var s=t('<li class="'+u.navItem+" "+u.navCategory+'">'),l=t('<a href="#" class="'+u.navLink+" "+u.navCategoryLink+'" data-flip-category="'+r+'">'+r+"</a>").data("category",r).data("index",n);e[r]=t('<ul class="'+u.navChild+'" />'),z=z.add(l),s.append(l,e[r]).appendTo(Y)}e[r].append(o)}else Y.append(o);o.wrap('<li class="'+u.navItem+'">')}),Y.on("click","a",function(e){var n=t(this).data("index");n>=0&&(b(n),e.preventDefault())}),"after"===h.nav?H.append(Y):H.prepend(Y),F=Y.find("."+u.navItem))}function m(){if(h.nav){var e=U.data("flip-category");F.removeClass(u.navCurrent),z.filter(function(){return t(this).data("index")===A||e&&t(this).data("category")===e}).parent().addClass(u.navCurrent)}}function g(){H.css("transition","none"),j.css("transition","none"),S.css("transition","none")}function _(){H.css("transition",""),j.css("transition",""),S.css("transition","")}function y(){var e,n=0;return S.each(function(){(e=t(this).height())>n&&(n=e)}),n}function x(e){e&&g(),M=j.width(),j.height(y()),M?(N&&(clearInterval(N),N=!1),S.each(function(n){var i,r,a=t(this);a.attr("class",function(t,e){return e&&e.replace(f,"").replace(p," ")}),i=a.outerWidth(),0!==h.spacing&&a.css("margin-right",i*h.spacing+"px"),r=a.position().left,R[n]=-1*(r+i/2-M/2),n===S.length-1&&(C(),e&&setTimeout(_,1))})):N=N||setInterval(function(){x(e)},500)}function C(){var e,i,r,a=S.length;S.each(function(n){e=t(this),i=" ",n===A?(i+=u.itemCurrent,r=a+1):n<A?(i+=u.itemPast+" "+u.itemPast+"-"+(A-n),r=n):(i+=u.itemFuture+" "+u.itemFuture+"-"+(n-A),r=a-n),e.css("z-index",r).attr("class",function(t,e){return e&&e.replace(f,"").replace(p," ")+i})}),A>=0&&(M&&R[A]!==n||x(!0),l?j.css("transform","translateX("+R[A]+"px)"):j.css({left:R[A]+"px"})),m()}function b(t){var e=A;if(!(S.length<=1))return"prev"===t?A>0?A--:h.loop&&(A=S.length-1):"next"===t?A<S.length-1?A++:h.loop&&(A=0):"number"==typeof t?A=t:t!==n&&(A=S.index(t)),U=S.eq(A),A!==e&&h.onItemSwitch&&h.onItemSwitch.call(H,S[A],S[e]),C(),H}function w(t){return h.autoplay=t||h.autoplay,clearInterval(O),O=setInterval(function(){var t=A;b("next"),t!==A||h.loop||clearInterval(O)},h.autoplay),H}function I(){return clearInterval(O),O=0,H}function k(t){return I(),h.autoplay&&t&&(O=-1),H}function P(){x(!0),H.hide().css("visibility","").addClass(u.active).fadeIn(h.fadeIn)}function D(){if(j=H.find(h.itemContainer).addClass(u.container),!((S=j.find(h.itemSelector)).length<=1))return S.addClass(u.item).each(function(){var e=t(this);e.children("."+u.itemContent).length||e.wrapInner('<div class="'+u.itemContent+'" />')}),S.on("click.flipster",function(n){q||(h.centerImageClickUrl&&t(this).hasClass(u.itemCurrent)&&(e.open(h.centerImageClickUrl),n.preventDefault()),h.click&&(t(this).hasClass(u.itemCurrent)||n.preventDefault(),b(this)))}),v(),d(),A>=0&&b(A),H}function E(t){h.keyboard&&(t[0].tabIndex=0,t.on("keydown.flipster",i(function(t){var e=t.which;37!==e&&39!==e||(b(37===e?"prev":"next"),t.preventDefault())},250,!0)))}function T(t){if(h.scrollwheel){var e,n,r=!1,a=0,o=0,l=0;t.on("mousewheel.flipster wheel.flipster",function(){r=!0}).on("mousewheel.flipster wheel.flipster",i(function(t){clearTimeout(o),o=setTimeout(function(){a=0,l=0},300),t=t.originalEvent,l+=t.wheelDelta||-1*(t.deltaY+t.deltaX),Math.abs(l)<25||(a++,n!==(e=l>0?"prev":"next")&&(a=0),n=e,(a<6||a%3==0)&&b(e),l=0)},50)),s.on("mousewheel.flipster wheel.flipster",function(t){r&&(t.preventDefault(),r=!1)})}}function L(t){if(h.touch){var e,n,r,a,o=!1,s=i(b,50);t.on({"touchstart.flipster":function(t){t=t.originalEvent,q=t.touches?t.touches[0].clientX:t.clientX,o=t.touches?t.touches[0].clientY:t.clientY},"touchmove.flipster":i(function(t){!1!==q&&(t=t.originalEvent,e=t.touches?t.touches[0].clientX:t.clientX,n=t.touches?t.touches[0].clientY:t.clientY,r=n-o,a=e-q,Math.abs(r)<200&&Math.abs(a)>=0&&(s(a<0?"next":"prev"),q=e,t.preventDefault()))},0),"touchend.flipster touchcancel.flipster ":function(){q=!1}})}}var X,j,M,N,S,U,Y,F,z,H=t(this),R=[],A=0,O=!1,q=!1;X={jump:b,next:function(){return b("next")},prev:function(){return b("prev")},play:w,stop:I,pause:k,index:D},H.data("methods",X),H.hasClass(u.active)||function(){var t;if(H.css("visibility","hidden"),D(),S.length<=1)H.css("visibility","");else{t=!!h.style&&"flipster--"+h.style.split(" ").join(" flipster--"),H.addClass([u.main,l?"flipster--transform":" flipster--no-transform",t,h.click?"flipster--click":""].join(" ")),h.start&&(A="center"===h.start?Math.floor(S.length/2):h.start),b(A);var e=H.find("img");if(e.length){var n=0;e.on("load",function(){++n>=e.length&&P()}),setTimeout(P,750)}else P();s.on("resize.flipster",i(x,400)),h.autoplay&&w(),h.pauseOnHover&&j.on("mouseenter.flipster",function(){O?k(!0):I()}).on("mouseleave.flipster",function(){-1===O&&w()}),E(H),T(j),L(j)}}()})}}(jQuery,window);
